<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <title>Currency Converter</title>
    <style>
      :root{--bg:#f7f8fb;--card:#ffffff;--primary:#0b5fff;--muted:#6b7280}
      *{box-sizing:border-box}
      body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:var(--bg); margin:0; padding:20px}
      .container{max-width:440px;margin:0 auto}
      .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 6px 20px rgba(11,95,255,0.06)}
      h1{font-size:1.25rem;margin:0 0 12px}
      .header{display:flex;justify-content:space-between;align-items:center}
      .refresh-btn{background:transparent;border:none;color:var(--primary);cursor:pointer;padding:8px;border-radius:50%;transition:background 0.2s}
      .refresh-btn:hover{background:rgba(11,95,255,0.1)}
      .refresh-btn svg{width:20px;height:20px;display:block}
      label{display:block;margin-top:10px;font-size:0.95rem}
      input[type="text"], input[type="number"], select{width:100%;padding:14px 12px;border-radius:8px;border:1px solid #e6e9ef;font-size:1rem;margin-top:6px}
      button.convert-btn{width:100%;margin-top:16px;padding:12px;border-radius:10px;border:0;background:var(--primary);color:#fff;font-weight:600;font-size:1rem}
      .note{color:var(--muted);font-size:0.85rem;margin-top:12px}
      .rates{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
      .rate{background:#f1f5ff;padding:8px 10px;border-radius:8px;font-size:0.85rem;color:#073b8c}
      footer{margin-top:12px;text-align:center;color:var(--muted);font-size:0.8rem}
      @media (max-width:420px){body{padding:12px}.card{padding:14px}h1{font-size:1.1rem}}
      @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
      .refresh-btn.spinning svg{animation:spin 1s linear infinite}
    </style>
  </head>
  <body>
    <div class="container">
      <div class="card">
        <div class="header">
          <h1>Currency Converter</h1>
          <button class="refresh-btn" onclick="refreshRates()" title="Update rates">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
            </svg>
          </button>
        </div>

        <form action="/convert" method="post" autocomplete="off">
          <label for="valor">Amount</label>
          <input id="valor" name="valor" type="number" step="any" inputmode="decimal" placeholder="E.g.: 100" required>

          <label for="origem">From Currency</label>
          <select id="origem" name="origem">
            {% for m in moedas %}
              <option value="{{m}}" {% if m=='USD' %}selected{% endif %}>{{m}}</option>
            {% endfor %}
          </select>

          <label for="destino">To Currency</label>
          <select id="destino" name="destino">
            {% for m in moedas %}
              <option value="{{m}}" {% if m=='USD' %}selected{% endif %}>{{m}}</option>
            {% endfor %}
          </select>

          <button type="submit" class="convert-btn">Convert</button>
        </form>

        <div class="rates">
          {% for m in moedas %}
            <div class="rate">{{ m }}</div>
          {% endfor %}
        </div>
      </div>

      <footer>Mobile-friendly — tap to enter value</footer>
    </div>

    <script>
      function refreshRates() {
        const btn = document.querySelector('.refresh-btn');
        btn.classList.add('spinning');
        // Recarrega a página após um pequeno delay para mostrar a animação
        setTimeout(() => {
          window.location.reload();
        }, 500);
      }
    </script>
  </body>
</html>